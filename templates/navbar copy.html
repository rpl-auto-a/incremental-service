{% load static %}
<nav class="header bg-[#d7e9f4] sticky top-0 z-10">
    <div class="container mx-auto flex font-raleway font-medium justify-between items-center py-3 md:py-4 px-2 md:px-0">
        <div class="left-logo flex items-center">
            <div class="flex module-buttons flex items-center text-[#003f7e] gap-4">
                <a href="/"><img src="https://cdn-icons-png.flaticon.com/512/2240/2240692.png" alt="RentAcross logo" width="30"></a>
                <a class="nav-btn font-bold text-xl relative after:content-[''] after:bg-[#005b9c] after:h-[2px] after:w-[0%] after:left-0 after:-bottom-[5px] after:rounded-xl after:absolute after:duration-300" href="/">RentAcross</a>
            </div>
        </div>
        {% if user.is_authenticated %}
        <div class="">
            <div class="dropdown inline-block relative">
              <button class="text-[#003f7e] py-2 px-4 rounded inline-flex items-center">
                <span class="mr-1">Hello, <span class="font-semibold">{{ user }}</span></span>
                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/> </svg>
              </button>
              <ul class="dropdown-menu absolute hidden text-[#003f7e] pt-1 w-28 right-1">
                <li class=""><a class="flex flex-row rounded-t bg-white hover:bg-gray-100 py-2 px-4 block whitespace-no-wrap text-sm md:text-base" href="{% url 'new_post' %}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="4" stroke="currentColor" stroke-width="2" fill="none" />
                        <line x1="12" y1="7" x2="12" y2="17" />
                        <line x1="7" y1="12" x2="17" y2="12" />
                    </svg>
                    <span class="pl-2 font-bold">Create</span>
                </a></li>
                <li class=""><a class="text-sm md:text-base bg-white hover:bg-gray-100 py-2 px-4 block whitespace-no-wrap" href="{% url 'show_user_posts' %}">My Posts</a></li>
                <li class=""><a class="text-sm md:text-base bg-white hover:bg-gray-100 py-2 px-4 block whitespace-no-wrap" href="{% url 'userData:favorite' %}">Favorites</a></li>
                <li class=""><a class="bg-white rounded-b text-sm md:text-base hover:bg-gray-100 py-2 px-4 block whitespace-no-wrap font-bold" href="{% url 'authentication:logout_user' %}">Logout</a></li>
              </ul>
            </div>
        </div>
        {% else %}
        <div class="md:hidden flex items-center">
            <div id="user-dropdown-mobile" class="relative float-right -mb-2 z-20">
                <button class="text-[#003f7e]" onclick="toggleDropdown(window.innerWidth <= 768)">
                    <div class="flex gap-2 items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>                          
                    </div>
                </button>
                <ul id="dropdown-content-mobile" class="hidden absolute right-0 rounded-lg z-20 shadow-md bg-white">
                    <li class="hover:bg-gray-100 rounded-lg">
                        <a class="block whitespace-no-wrap w-40 text-sm py-3 px-4" href="/auth/login">Login</a>
                    </li>
                    <li class="hover:bg-gray-100 rounded-lg">
                        <a class="block whitespace-no-wrap w-40 text-sm py-3 px-4" href="/auth/register">Register</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="hidden md:flex text-[#003f7e] gap-8 -mb-1">
            <button>
                <a class="nav-btn relative after:content-[''] after:bg-[#005b9c] after:h-[2px] after:w-[0%] after:left-0 after:-bottom-[5px] after:rounded-xl after:absolute after:duration-300" href="/auth/register">Register</a>
            </button>
            <button>
                <a class="nav-btn relative after:content-[''] after:bg-[#005b9c] after:h-[2px] after:w-[0%] after:left-0 after:-bottom-[5px] after:rounded-xl after:absolute after:duration-300" href="/auth/login">Login</a>
            </button>
        </div>
        {% endif %}
    </div>
</nav>

<script>
    function validateAndSubmitSearch() {
      var searchInput = document.getElementById('navbar-search-input').value.trim();
    
      if (searchInput !== '') {
        document.getElementById('navbar-search-form').submit();
      } else {
        // Optionally, you can provide feedback to the user about the empty search field
        alert('Please enter the properties name.');
      }
    }
</script>

<style>
    .dropdown:hover .dropdown-menu {
        display: block;
    }
</style>